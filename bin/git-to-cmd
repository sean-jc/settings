#!/bin/bash
shopt -s extglob

opts="--nogit --nogit-fallback --norolestats --nor --nol --nofixes --pattern-depth=$3"

if [[ $(basename $1) =~ ^$40000- ]] ; then
    maint=$(./scripts/get_maintainer.pl $opts $(dirname $1)/!($40000-cover-letter.patch) | tr '\n' ',')
else
    maint=$(./scripts/get_maintainer.pl $opts $1 | tr '\n' ',')
    if [ "$maint" == "" ]; then
	    maint="linux-kernel@vger.kernel.org"
    fi
fi

maint=${maint%,};
echo $maint
