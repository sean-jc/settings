#!/bin/bash
git config core.sparseCheckout true

echo "arch/x86/*" > .git/info/sparse-checkout
echo "drivers/acpi/*" >> .git/info/sparse-checkout
echo "drivers/base/*" >> .git/info/sparse-checkout
echo "!drivers/base/firmware_loader" >> .git/info/sparse-checkout
echo "!drivers/base/power" >> .git/info/sparse-checkout
echo "!drivers/base/regmap" >> .git/info/sparse-checkout
echo "!drivers/base/test" >> .git/info/sparse-checkout
echo "drivers/platform/x86/intel_sgx/*" >> .git/info/sparse-checkout
echo "drivers/block/virtio_blk.c" >> .git/info/sparse-checkout
echo "drivers/net/virtio_net.c" >> .git/info/sparse-checkout
echo "drivers/ptp/ptp_kvm.c" >> .git/info/sparse-checkout
echo "drivers/vhost/*" >> .git/info/sparse-checkout
echo "drivers/virtio/*" >> .git/info/sparse-checkout
echo "Documentation/admin-guide/cgroup-v2.rst" >> .git/info/sparse-checkout
echo "Documentation/process/*" >> .git/info/sparse-checkout
echo "Documentation/virtual/*" >> .git/info/sparse-checkout
echo "Documentation/x86/*" >> .git/info/sparse-checkout
echo "include/*" >> .git/info/sparse-checkout
echo "fs/*.c" >> .git/info/sparse-checkout
echo "fs/*.h" >> .git/info/sparse-checkout
echo "init/*" >> .git/info/sparse-checkout
echo "lib/*" >> .git/info/sparse-checkout
echo "kernel/*" >> .git/info/sparse-checkout
echo "mm/*" >> .git/info/sparse-checkout
echo "security/*" >> .git/info/sparse-checkout
echo "tools/arch/x86" >> .git/info/sparse-checkout
echo "tools/include/uapi/linux/kvm.h" >> .git/info/sparse-checkout
echo "tools/objtool" >> .git/info/sparse-checkout
echo "tools/testing/selftests/kselftest.h" >> .git/info/sparse-checkout
echo "tools/testing/selftests/kselftest_operators.h" >> .git/info/sparse-checkout
echo "tools/testing/selftests/kvm" >> .git/info/sparse-checkout
echo "tools/testing/selftests/x86/sgx" >> .git/info/sparse-checkout
echo "virt/*" >> .git/info/sparse-checkout
echo "!virt/kvm/arm/*" >> .git/info/sparse-checkout
echo "!include/uapi/linux/netfilter*" >> .git/info/sparse-checkout
echo "!include/soc/arc/aux.h" >> .git/info/sparse-checkout
echo "README.md" >> .git/info/sparse-checkout
echo "MAINTAINERS" >> .git/info/sparse-checkout

git read-tree -mu HEAD